#include <stdio.h>
#include <ctype.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>
#include <signal.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <sys/select.h>
#include <unistd.h>
#include <sched.h>
#include "imx233.h"
#include "gpio_map.h"

#ifndef MAIN
#define MAIN


/***************************************

LCD RESET

***************************************/
void initLCDRESET(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL3_SET, 0b00000000000000000000000000110000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE6_SET,  0b00000000000000000000000100000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE6_CLR,  0b00000000000000000000001000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL1_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000001000000000000000000);
}

void setLCDRESET(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_SET,   0b00000000000001000000000000000000);
}

void clrLCDRESET(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_CLR,   0b00000000000001000000000000000000);
}

/***************************************

PIN31: komt overeen met RELAY2 of de aan en af relay

***************************************/

void initPIN31(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL5_SET, 0b00000011000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE11_SET, 0b00000000000000010000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE11_CLR, 0b00000000000000100000000000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL2_SET,   0b00010000000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN2_CLR,    0b00010000000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DOE2_SET,    0b00010000000000000000000000000000);
}

void setPIN31(){
	gpio_wr_eigen(HW_PINCTRL_DOUT2_SET,   0b00010000000000000000000000000000);
}

void clrPIN31(){
	gpio_wr_eigen(HW_PINCTRL_DOUT2_CLR,   0b00010000000000000000000000000000);
}

/***************************************

PIN30: komt overeen met RELAY1 of het verschil om te op en ontladen

***************************************/
void initPIN30(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL5_SET, 0b00000000110000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE11_SET, 0b00000000000000000001000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE11_CLR, 0b00000000000000000010000000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL2_SET,   0b00001000000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN2_CLR,    0b00001000000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DOE2_SET,    0b00001000000000000000000000000000);
}

void setPIN30(){
	gpio_wr_eigen(HW_PINCTRL_DOUT2_SET,   0b00001000000000000000000000000000);
}

void clrPIN30(){
	gpio_wr_eigen(HW_PINCTRL_DOUT2_CLR,   0b00001000000001000000000000000000);
}

/***************************************

PIN1

***************************************/
void initPIN1(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL2_SET, 0b00000000000000000000000000000011);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_SET,  0b00000000000000000000000000000001);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_CLR,  0b00000000000000000000000000000010);
	//gpio_wr_eigen(HW_PINCTRL_PULL2_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000000000000000000000001);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000000000000000000000001);
}

void setPIN1(){
	gpio_wr_eigen(HW_PINCTRL_DOUT2_SET,   0b00000000000000000000000000000001);
}

void clrPIN1(){
	gpio_wr_eigen(HW_PINCTRL_DOUT2_CLR,   0b00000000000000000000000000000001);
}

/***************************************

PIN2

***************************************/
void initPIN2(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL2_SET, 0b00000000000000000000000000001100);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_SET,  0b00000000000000000000000000010000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_CLR,  0b00000000000000000000000000100000);
	//gpio_wr_eigen(HW_PINCTRL_PULL1_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000000000000000000000010);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000000000000000000000010);
}

void setPIN2(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_SET,   0b00000000000000000000000000000010);
}

void clrPIN2(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_CLR,   0b00000000000000000000000000000010);
}

/***************************************

PIN3 

***************************************/
void initPIN3(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL2_SET, 0b00000000000000000000000000110000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_SET,  0b00000000000000000000000100000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_CLR,  0b00000000000000000000001000000000);
	//gpio_wr_eigen(HW_PINCTRL_PULL1_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000000000000000000000100);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000000000000000000000100);
}

void setPIN3(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_SET,   0b00000000000000000000000000000100);
}

void clrPIN3(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_CLR,   0b00000000000000000000000000000100);
}

/***************************************

PIN4

***************************************/
void initPIN4(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL2_SET, 0b00000000000000000000000011000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_SET,  0b00000000000000000001000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_CLR,  0b00000000000000000010000000000000);
	//gpio_wr_eigen(HW_PINCTRL_PULL1_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000000000000000000001000);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000000000000000000001000);
}

void setPIN4(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_SET,   0b00000000000000000000000000001000);
}

void clrPIN4(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_CLR,   0b00000000000000000000000000001000);
}

/***************************************

PIN5

***************************************/
void initPIN5(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL2_SET, 0b00000000000000000000001100000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_SET,  0b00000000000000010000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_CLR,  0b00000000000000100000000000000000);
	//gpio_wr_eigen(HW_PINCTRL_PULL1_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000000000000000000010000);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000000000000000000010000);
}

void setPIN5(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_SET,   0b00000000000000000000000000010000);
}

void clrPIN5(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_CLR,   0b00000000000000000000000000010000);
}

/***************************************

PIN6

***************************************/
void initPIN6(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL2_SET, 0b00000000000000000000110000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_SET,  0b00000000000100000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_CLR,  0b00000000001000000000000000000000);
	//gpio_wr_eigen(HW_PINCTRL_PULL1_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000000000000000000100000);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000000000000000000100000);
}

void setPIN6(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_SET,   0b00000000000000000000000000100000);
}

void clrPIN6(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_CLR,   0b00000000000000000000000000100000);
}

/***************************************

PIN7

***************************************/
void initPIN7(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL2_SET, 0b00000000000000000011000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_SET,  0b00000001000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_CLR,  0b00000010000000000000000000000000);
	//gpio_wr_eigen(HW_PINCTRL_PULL1_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000000000000000001000000);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000000000000000001000000);
}

void setPIN7(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_SET,   0b00000000000000000000000001000000);
}

void clrPIN7(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_CLR,   0b00000000000000000000000001000000);
}

/***************************************

PIN8

***************************************/
void initPIN8(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL2_SET, 0b00000000000000001100000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_SET,  0b00010000000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE4_CLR,  0b00100000000000000000000000000000);
	//gpio_wr_eigen(HW_PINCTRL_PULL1_SET,   0b00000000000001000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DIN1_CLR,    0b00000000000000000000000010000000);
	gpio_wr_eigen(HW_PINCTRL_DOE1_SET,    0b00000000000000000000000010000000);
}

void setPIN8(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_SET,   0b00000000000000000000000010000000);
}

void clrPIN8(){
	gpio_wr_eigen(HW_PINCTRL_DOUT1_CLR,   0b00000000000000000000000010000000);
}

/***************************************

PIN9: NOG NIET GEFIXED!!

***************************************/
void initPIN9(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL0_SET, 0b00000000000000000000000000000011);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_SET,  0b00000000000000000000000000000001);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_CLR,  0b00000000000000000000000000000010);
	gpio_wr_eigen(HW_PINCTRL_PULL0_SET,   0b00000000000000000000000000000001);
	gpio_wr_eigen(HW_PINCTRL_DIN0_CLR,    0b00000000000000000000000000000001);
	gpio_wr_eigen(HW_PINCTRL_DOE0_SET,    0b00000000000000000000000000000001);
}

void setPIN9(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_SET,   0b00000000000000000000000000000001);
}

void clrPIN9(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_CLR,   0b00000000000000000000000000000001);
}

/***************************************

LCD9

***************************************/
void initLCD9(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL0_SET, 0b00000000000000000000000000001100);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_SET,  0b00000000000000000000000000010000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_CLR,  0b00000000000000000000000000100000);
	gpio_wr_eigen(HW_PINCTRL_PULL0_SET,   0b00000000000000000000000000000010);
	gpio_wr_eigen(HW_PINCTRL_DIN0_CLR,    0b00000000000000000000000000000010);
	gpio_wr_eigen(HW_PINCTRL_DOE0_SET,    0b00000000000000000000000000000010);
}

void setLCD9(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_SET,   0b00000000000000000000000000000010);
}

void clrLCD9(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_CLR,   0b00000000000000000000000000000010);
}

/***************************************

LCD10

***************************************/
void initLCD10(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL0_SET, 0b00000000000000000000000000110000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_SET,  0b00000000000000000000000100000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_CLR,  0b00000000000000000000001000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL0_SET,   0b00000000000000000000000000000100);
	gpio_wr_eigen(HW_PINCTRL_DIN0_CLR,    0b00000000000000000000000000000100);
	gpio_wr_eigen(HW_PINCTRL_DOE0_SET,    0b00000000000000000000000000000100);
}

void setLCD10(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_SET,   0b00000000000000000000000000000100);
}

void clrLCD10(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_CLR,   0b00000000000000000000000000000100);
}

/***************************************

LCD11

***************************************/
void initLCD11(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL0_SET, 0b00000000000000000000000011000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_SET,  0b00000000000000000001000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_CLR,  0b00000000000000000010000000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL0_SET,   0b00000000000000000000000000001000);
	gpio_wr_eigen(HW_PINCTRL_DIN0_CLR,    0b00000000000000000000000000001000);
	gpio_wr_eigen(HW_PINCTRL_DOE0_SET,    0b00000000000000000000000000001000);
}

void setLCD11(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_SET,   0b00000000000000000000000000001000);
}

void clrLCD11(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_CLR,   0b00000000000000000000000000001000);
}

/***************************************

LCD12

***************************************/
void initLCD12(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL0_SET, 0b00000000000000000000001100000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_SET,  0b00000000000000010000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_CLR,  0b00000000000000100000000000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL0_SET,   0b00000000000000000000000000010000);
	gpio_wr_eigen(HW_PINCTRL_DIN0_CLR,    0b00000000000000000000000000010000);
	gpio_wr_eigen(HW_PINCTRL_DOE0_SET,    0b00000000000000000000000000010000);
}

void setLCD12(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_SET,   0b00000000000000000000000000010000);
}

void clrLCD12(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_CLR,   0b00000000000000000000000000010000);
}

/***************************************

LCD13

***************************************/
void initLCD13(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL0_SET, 0b00000000000000000000110000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_SET,  0b00000000000100000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_CLR,  0b00000000001000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL0_SET,   0b00000000000000000000000000100000);
	gpio_wr_eigen(HW_PINCTRL_DIN0_CLR,    0b00000000000000000000000000100000);
	gpio_wr_eigen(HW_PINCTRL_DOE0_SET,    0b00000000000000000000000000100000);
}

void setLCD13(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_SET,   0b00000000000000000000000000100000);
}

void clrLCD13(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_CLR,   0b00000000000001000000000000000000);
}

/***************************************

LCD14

***************************************/
void initLCD14(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL0_SET, 0b00000000000000000011000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_SET,  0b00000001000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_CLR,  0b00000010000000000000000000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL0_SET,   0b00000000000000000000000001000000);
	gpio_wr_eigen(HW_PINCTRL_DIN0_CLR,    0b00000000000000000000000001000000);
	gpio_wr_eigen(HW_PINCTRL_DOE0_SET,    0b00000000000000000000000001000000);
}

void setLCD14(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_SET,   0b00000000000000000000000001000000);
}

void clrLCD14(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_CLR,   0b00000000000000000000000001000000);
}

/***************************************

LCD15

***************************************/
void initLCD15(){
	gpio_wr_eigen(HW_PINCTRL_MUXSEL0_SET, 0b00000000000000001100000000000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_SET,  0b00010000000000000000000100000000);
	gpio_wr_eigen(HW_PINCTRL_DRIVE0_CLR,  0b00100000000000000000001000000000);
	gpio_wr_eigen(HW_PINCTRL_PULL0_SET,   0b00000000000000000000000010000000);
	gpio_wr_eigen(HW_PINCTRL_DIN0_CLR,    0b00000000000000000000000010000000);
	gpio_wr_eigen(HW_PINCTRL_DOE0_SET,    0b00000000000000000000000010000000);
}

void setLCD15(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_SET,   0b00000000000000000000000010000000);
}

void clrLCD15(){
	gpio_wr_eigen(HW_PINCTRL_DOUT0_CLR,   0b00000000000000000000000010000000);
}


/***************************************

Main

***************************************/
int main(){
	int i;
	gpio_map();
	initLCD10();
	initLCD11();
	initLCD12();
	initLCD13();
	initLCD14();
	initLCD15();
	initPIN1();
	initPIN2();
	initPIN3();
	initPIN30();
	initPIN31();
	initPIN4();
	initPIN5();
	initPIN6();
	initPIN7();
	initPIN8();
	initPIN9();
	for(i=0; i<100; i++){
		setLCD10();
		setLCD11();
		setLCD12();
		setLCD13();
		setLCD14();
		setLCD15();
		setPIN1();
		setPIN2();
		setPIN3();
		setPIN30();
		setPIN31();
		setPIN4();
		setPIN5();
		setPIN6();
		setPIN7();
		setPIN8();
		setPIN9();
		usleep(20000);
		clrLCD10();
		clrLCD11();
		clrLCD12();
		clrLCD13();
		clrLCD14();
		clrLCD15();
		clrPIN1();
		clrPIN2();
		clrPIN3();
		clrPIN30();
		clrPIN31();
		clrPIN4();
		clrPIN5();
		clrPIN6();
		clrPIN7();
		clrPIN8();
		clrPIN9();
		usleep(20000);
	}
}

#endif